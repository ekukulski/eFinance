<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="eFinance.Pages.TransactionEditPage"
             Title="{Binding Title}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="14">

            <!-- Header -->
            <Label Text="{Binding Header}"
                   FontSize="22"
                   FontAttributes="Bold" />

            <!-- Fields -->
            <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                  ColumnDefinitions="140,*"
                  ColumnSpacing="12"
                  RowSpacing="12">

                <Label Grid.Row="0" Grid.Column="0"
                       Text="Date"
                       VerticalOptions="Center" />

                <DatePicker Grid.Row="0" Grid.Column="1"
                            Date="{Binding PostedDate}" />

                <Label Grid.Row="1" Grid.Column="0"
                       Text="Description"
                       VerticalOptions="Center" />

                <Entry Grid.Row="1" Grid.Column="1"
                       Text="{Binding Description}"
                       Placeholder="Description" />

                <Label Grid.Row="2" Grid.Column="0"
                       Text="Amount"
                       VerticalOptions="Center" />

                <Entry Grid.Row="2" Grid.Column="1"
                       Text="{Binding AmountText}"
                       Keyboard="Numeric"
                       Placeholder="0.00" />

                <Label Grid.Row="3" Grid.Column="0"
                       Text="Category"
                       VerticalOptions="Center" />

                <Picker Grid.Row="3" Grid.Column="1"
                        Title="Select category"
                        ItemsSource="{Binding CategoryItems}"
                        ItemDisplayBinding="{Binding Name}"
                        SelectedItem="{Binding SelectedCategory}" />

                <Label Grid.Row="4" Grid.Column="0"
                       Text="Memo"
                       VerticalOptions="Center" />

                <Entry Grid.Row="4" Grid.Column="1"
                       Text="{Binding Memo}"
                       Placeholder="Memo (optional)" />
            </Grid>

            <!-- Optional: leave in UI but disable until implemented -->
            <Button Text="Create Rule"
                    Style="{StaticResource NeutralButtonStyle}"
                    FontAttributes="Bold"
                    IsEnabled="False"
                    Opacity="0.55"
                    Margin="0,4,0,0" />

            <!-- Action buttons -->
            <HorizontalStackLayout Spacing="12"
                                   Margin="0,20,0,0"
                                   HorizontalOptions="FillAndExpand">

                <Button Text="Save"
                        Style="{StaticResource SuccessButtonStyle}"
                        FontAttributes="Bold"
                        Command="{Binding SaveCommand}"
                        HorizontalOptions="StartAndExpand" />

                <Button Text="Cancel"
                        Style="{StaticResource NeutralButtonStyle}"
                        FontAttributes="Bold"
                        Command="{Binding CancelCommand}"
                        HorizontalOptions="CenterAndExpand" />

                <Button Text="Return"
                        Style="{StaticResource ReturnButtonStyle}"
                        FontAttributes="Bold"
                        Command="{Binding CancelCommand}"
                        HorizontalOptions="End" />
            </HorizontalStackLayout>

            <!-- Optional info line -->
            <Label Text=""
                   TextColor="{AppThemeBinding Light={StaticResource TextSecondaryLight}, Dark={StaticResource TextSecondaryDark}}"
                   FontSize="12" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
